#!/bin/bash

timeout=10m
if [[ "$1" = -* || "$1" = "" ]]; then
  t=""
else
  t="$1"
  shift
fi

packages="\
./pkg/sql/opt/exec/execbuilder \
./pkg/sql/opt/idxconstraint \
./pkg/sql/opt/memo \
./pkg/sql/opt/norm \
./pkg/sql/opt/optbuilder \
./pkg/sql/opt/optgen/... \
./pkg/sql/opt/xform"

set -x

make test PKG="$packages" TESTS="$t" TESTFLAGS="$*" TESTTIMEOUT=5s |& tee /tmp/log


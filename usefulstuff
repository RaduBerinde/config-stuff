SHOW ALL CLUSTER SETTINGS;

 -- enable tracing:
SET CLUSTER SETTING sql.trace.txn.enable_threshold = '1ns';

 -- disable tracing:
SET CLUSTER SETTING sql.trace.txn.enable_threshold = '0';

SET CLUSTER SETTING server.remote_debugging.mode = 'any';

SET CLUSTER SETTING trace.debug.enable = true;

SET CLUSTER SETTING trace.lightstep.token = '4d334b606818ed1a62d0c045fca222cc';



 -- restore TPC-H data:

SET CLUSTER SETTING cluster.organization = 'Cockroach Labs - Production Testing';
SET CLUSTER SETTING enterprise.license = 'crl-0-EJL04ukFGAEiI0NvY2tyb2FjaCBMYWJzIC0gUHJvZHVjdGlvbiBUZXN0aW5n';

SET CLUSTER SETTING kv.bulk_io_write.max_rate = '30MB';
CREATE DATABASE tpch;
restore tpch.* from 'azure://backup-test/benchmarks/tpch/scalefactor-1?AZURE_ACCOUNT_NAME=cockroachbackuptest&AZURE_ACCOUNT_KEY=FzWMkVNcHorQ2IPG5il987GEmEzSxmV8WxXOZHzKV4XfvNTXHEDdBrsAIMB2/UutSPhhNQwVt9zs4dVXD/6w/w==';
restore tpch.* from 'azure://backup-test/benchmarks/tpch/scalefactor-10?AZURE_ACCOUNT_NAME=cockroachbackuptest&AZURE_ACCOUNT_KEY=FzWMkVNcHorQ2IPG5il987GEmEzSxmV8WxXOZHzKV4XfvNTXHEDdBrsAIMB2/UutSPhhNQwVt9zs4dVXD/6w/w==';


# use /mnt for crdb data!
MACHINE_SIZE=Standard_D3_v2 AZWORKER_NAME=n1 scripts/azworker.sh create
MACHINE_SIZE=Standard_D3_v2 AZWORKER_NAME=n2 scripts/azworker.sh create
MACHINE_SIZE=Standard_D3_v2 AZWORKER_NAME=n3 scripts/azworker.sh create

COCKROACH_TEST_LIGHTSTEP_TOKEN=4d334b606818ed1a62d0c045fca222cc make test PKG=./pkg/ccl/sqlccl TESTFLAGS='-v'
